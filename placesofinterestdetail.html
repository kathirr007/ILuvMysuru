<!DOCTYPE html>
<html lang="en">
<head>
<title>ILuv Mysuru</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author" content="">
<title>ILuv Mysuru | Main</title>
<link href="master/css/style.css" rel="stylesheet">
<!-- <link href="https://fonts.googleapis.com/css?family=Abel|Baloo+Tamma|Courgette|Dosis|Poiret+One|Righteous" rel="stylesheet"> -->
<!--<link href="master/css/media.css" rel="stylesheet">-->
<!-- <script type="text/javascript" src="cordova.js"></script> -->
<script type="text/javascript" src="index.js"></script>
<!-- <script src="master/js/jquery-ui.min.js"></script> -->
<script src="master/js/jquery-1.12.4.min.js"></script>
<script src="master/js/bootstrap.min.js"></script>
<script type="text/javascript" src="master/js/jssor.slider-21.1.5.min.js"></script> 
<!-- use jssor.slider-21.1.5.debug.js instead for debug --> 
<script type="text/javascript" src="master/js/carousel.js"></script>
<script src="master/js/menu-jquery.js"></script>
<script src="master/js/menu-jquery1.js"></script> 

<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDqGeQYbKFe5SHRmLYypFG3Ctwtct0GzsQ&v=3.20&sensor=false"></script>




<style>

</style>
</head>

<body class="details">
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.7";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<div class="logo">
<div class="menu"> 
    
    <!-- Menu icon -->
    
    <div class="icon-close"> <i class="fa fa-close"></i> <a style="font-family: 'Abel', sans-serif;">CLOSE</a></div>
    
    <!-- Menu -->
    
    <ul>
      <a href="main.html">
      <li class="menuli">
        <div><img src="master/images/home.png"/></div>
        <div style=" margin-left:40px; margin-top:-48px;">Home</div>
      </li>
      </a> <a href="placesofinterest.html">
      <li class="menuli">
        <div><img src="master/images/poi.png"/></div>
        <div style=" margin-left:40px; margin-top:-48px;">Places of Interest</div>
      </li>
      </a> <a href="hotelslodging.html">
      <li class="menuli">
        <div><img src="master/images/hotlod.png"/></div>
        <div style=" margin-left:40px; margin-top:-48px;">Hotels & Lodging</div>
      </li>
      </a> <a href="upcomingevents.html">
      <li class="menuli">
        <div><img src="master/images/events.png"/></div>
        <div style=" margin-left:40px; margin-top:-48px;">Upcoming Events</div>
      </li>
      </a> <a href="finedine.html">
      <li class="menuli">
        <div><img src="master/images/finedine.png"/></div>
        <div style=" margin-left:40px; margin-top:-48px;">Restaurants</div>
      </li>
      </a> <a href="lifestyle.html">
      <li class="menuli">
        <div><img src="master/images/lifestyle.png"/></div>
        <div style=" margin-left:40px; margin-top:-48px;">Lifestyle & Fashion</div>
      </li>
      </a> <a href="history.html">
      <li class="menuli">
        <div><img src="master/images/history.png"/></div>
        <div style=" margin-left:40px; margin-top:-48px;">History & Geography</div>
      </li>
      </a> 
      <a href="yogacenter.html">
      <li class="menuli">
        <div><img src="master/images/yoga.png"/></div>
        <div style=" margin-left:40px; margin-top:-48px;">Yoga Centers</div>
      </li>
      </a>
      <a href="localfavorites.html">
      <li class="menuli">
        <div><img src="master/images/localfav.png"/></div>
        <div style=" margin-left:40px; margin-top:-48px;">Local's Favourite</div>
      </li>
      </a>
      <a href="itinerary.html">
      <li class="menuli">
        <div><img src="master/images/itinerary.png"/></div>
        <div style=" margin-left:40px; margin-top:-48px;">Itinerary</div>
      </li>
      </a>
      <a href="emergencycontacts.html">
      <li class="menuli">
        <div><img src="master/images/contact.png"/></div>
        <div style=" margin-left:40px; margin-top:-48px;">Emergency Contacts</div>
      </li>
      </a><a href="help.html">
      <li class="menuli">
        <div><img src="master/images/help.png"/></div>
        <div style=" margin-left:40px; margin-top:-48px;">Help</div>
      </li>
      </a>
      <div style="text-align:center; color:#ffffff; padding-top:10px;"><a href="http://www.theoreminc.net" style="text-decoration:none !important; font-size:10px; text-transform:none !important;">&copy; 2016 Theorem Inc - All Rights Reserved</a></div>
    </ul>
  </div>
<div id="preheader">
    <ul>
      <div class="my-jumbotron">
        <li style="width:55%;">
          <div class="icon-menu"> <i class="fa fa-bars"></i><span style="padding-left:10px;">ILuv Mysuru</span></div>
        </li>
        <li style="width:43%; text-align:right; margin-top:15px; padding-right:5px;">
         <!--<a href="#" style="outline:none !important;"><i class="fa fa-facebook"></i></a>
         <a href="#" style="outline:none !important;"><i class="fa fa-twitter"></i></a>
         <a href="#" style="outline:none !important;"><i class="fa fa-instagram"></i></a>-->
         <a class="fb-like" data-href="https://www.facebook.com/ILuv-Mysuru-654462654720870/" data-width="200" data-layout="button" data-action="like" data-size="small" data-show-faces="false" data-share="false"></a>
         <a href="https://twitter.com/IluvMysuru" title="Follow @IluvMysuru on Twitter" target="_blank" class="twitter" style="" data-show-count="false">Follow</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

        </li>
      </div>
    </ul>
</div>

  <!-- Menu End --> <!--Logo--> 
</div>
<div class="clear"></div>
<!--container-->
<div class="my-container">
  <div class="main clearfix" >
    	<section id="slider-content">
    		
    	</section>
    <div class="clear"></div>
    <div id="placeblocks">
      <div style="background-color:rgba(250, 250, 250, 1.0);">
        <div class="detailblock">
          <div id="box1">
            <div id="tabs">
              <div id="id02"></div>
              <div id="id04"></div>
<div id="id05">
      <h2>Near by Places</h2>
</div>
              <div id="id03"></div>
              
              <!--              <div id="maps"></div>--> 
              
              <!--              <div id="tabs-2">
                <p style="padding: 10px;">
                  <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d31186.372447291145!2d76.621879271099!3d12.29580479330322!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMTLCsDE3JzQ0LjkiTiA3NsKwMzgnMjEuOCJF!5e0!3m2!1sen!2s!4v1472471812359" width="100%" height="450" frameborder="0" style="border:0" allowfullscreen></iframe>
                </p>
              </div>--> 
            </div>
          </div>
          <div class="clear"></div>
        </div>
      </div>

</div>
	<div class="bottommenu">
      <ul id="bm_ul">
        <li> 
        	<a href="#id05" style="text-decoration:none; outline:none;">
            	<i class="fa fa-street-view"></i>
            </a>
        </li>
        <li>
        	<a href="#id03" style="text-decoration:none; outline:none;">
        		<i class="fa fa-map-marker"></i>
            </a>
        </li>
        <li> 
        	<a href="#id02" style="text-decoration:none; outline:none;">
        		<i class="fa fa-info-circle"></i>
                
            </a>
        </li>
      </ul>
    </div>
</div>
</div>
<script>
	var xmlhttp = new XMLHttpRequest();
	var path = location.pathname.split(".")[0].split("/").pop();
	var pathname = "placesofinterest";
	var pathPid = location.href.slice(-16);
	var url = "master/json/" + pathname + ".json";

// custom styles
	$('body').addClass(pathname);
	$('a[href="#id02"]').click(function(){$('.detailblock').css({"padding":"50px 0px 0px 0px !important;"})});

console.log(pathname);console.log(pathPid);console.log(url);

xmlhttp.onreadystatechange=function() {
	if (xmlhttp.readyState == 4) {
		myFunction(xmlhttp.responseText);
	}
}
xmlhttp.open("GET", url, true);
xmlhttp.send();
function myFunction(response) {
var arr = JSON.parse(response),
	i, ratingstar, out = "<div>", out2 = "<div>", out3 = "<div id=\"details\">", maps = "<div id=\"map-canvas\">";

for(i = 0; i < arr.length; i++) {
var gall = arr[i].galleries,
	thumbImage;
	ratingstars = arr[i].ratingstar,
	kms = arr[i].nearkm,
	kms = kms ? kms : "- ";
	
	
function getstars(ratingstars){
	ratingstar = "";
		for (j=0; j < ratingstars; j++) {
			ratingstar += '<img src="master/images/ratingstar.png" alt="" />';
		}
	return ratingstar;
	};
	
// var actualRating = getstars(ratingstars);

	if (gall.length === 0) {
	thumbImage = "master/images/noimg.png"; }
	else {
	thumbImage = encodeURI(arr[i].galleries[0].img_path);
	}
   out += "<a href=\"" + pathname + "detail.html?pid=" + arr[i].placeid + "\" style=\"text-decoration:none;\"><div id=\"placeblocks\"><div style=\"background-color:rgba(250, 250, 250, 1.0);\"><div class=\"text\"><ul><li style=\"width:40%;\"><img src=" + thumbImage + " alt=\"\" width=\"125\" height=\"75\" class=\"img\" style=\"border:2px solid #d1cece;\"></li>";
    out += "<li style=\"width:60%; line-height:18px;\"><span style=\"color:#448802; font-family: \"Abel\", sans-serif; font-size:16px; font-weight:bold;\">" +arr[i].title + "</span><br><span style=\"color:#222222; font-family: \"Abel\", sans-serif; font-size:14px;\">" +arr[i].address + "</span><div style=\"color:#000; padding-top:15px;\"><ul style=\"float:left;\"><li>" + getstars(ratingstars)+ "</li><li style=\"padding-left:15px;\">"+kms+ "Kms from city</li></ul></div></li>";
    out += "</ul></div></div></div><div class=\"clear\"></div><div class=\"clear\"></div></a>";
    out += "</div>";
}



console.log(arr);
$.each(arr,function(idx){
if(arr[idx].placeid == pathPid) {
var sliderImagesList = arr[idx].galleries,
	nearestplace = arr[idx].nearestplace,
	nearestplace = nearestplace ? arr[idx].nearestplace.split("\r\n") : [];


console.log(nearestplace);


function buildSlider(sliderImagesList){
	var sliderContent = '';
	sliderContent += '<div id="jssor_1" style="position: relative; margin: 0 auto; top: 0px; left: 0px; width: 1300px; height: 500px; overflow: hidden; visibility: hidden;">\
		  <div data-u="slides" style="cursor: default; position: relative; top: 0px; left: 0px; width: 1300px; height: 500px; overflow: hidden;">';
	sliderImagesList.forEach(function(item){
		var img_name = encodeURI(item.img_path);
		sliderContent += '<div data-p="225.00" style="display: none;"><img data-u="image" src="'+item.img_path+'"/></div>';
	});
		sliderContent += '<div data-p="225.00" data-po="80% 55%" style="display: none;"> <a href="http://theoreminc.net"><img data-u="image" src="master/images/theorem.jpg"/></a></div> \
		</div>\
		  <div data-u="navigator" class="jssorb05" style="bottom:16px;right:16px;" data-autocenter="1">\
			<div data-u="prototype" style="width:16px;height:16px;"></div>\
		  </div>\
		  <span data-u="arrowleft" class="jssora22l" style="top:0px;left:12px;width:40px;height:58px;" data-autocenter="2"></span> \
		  <span data-u="arrowright" class="jssora22r" style="top:0px;right:12px;width:40px;height:58px;" data-autocenter="2"></span> \
		</div>';

	$("#slider-content").append(sliderContent);
}	
	buildSlider(sliderImagesList);
	jssor_1_slider_init();
	var nearestplaces = '';
		nearestplaces += '<div><ul>';
	nearestplace.forEach(function(item){
		nearestplaces += '<li>' + item + '</li>';
	});
		nearestplaces += '</ul></div>'

$(nearestplaces).insertAfter("#id05 h2");
$(function readmore(){
var details = $('#id04 #details');	
console.log(details);
$(details).each(function(event){
	var max_length = 150; 
	if($(this).html().length > max_length){
			var short_content 	= $(this).html().substr(0,max_length);
			var long_content	= $(this).html().substr(max_length);
			$(this).html(short_content+
						 '<a href="#" class="read_more"><br/>Read More</a>'+
						 '<span class="more_text" style="display:none;">'+long_content+'</span>');
 			$(this).find('a.read_more').click(function(event){ 
				event.preventDefault(); 
				$(this).hide();
				$(this).parents('.item').find('.more_text').show();
		 	});
		}
});
});

out2 += '<p style="color:#b65c39; font-family: \'Abel\', sans-serif; font-weight:bold; padding:10px;">' + arr[idx].title + '</p></div>';
out2 += '</div>';
out3 += '<div>'+ $("<div/>").html(arr[idx].details).text() +'</div>';
out3 += '</div>';
maps += '</div>';


var lati = arr[idx].lati,
	longi = arr[idx].longi;
 	lati = lati ? arr[idx].lati.substr(0,7) : "N/A",
 	longi = longi ? arr[idx].longi.substr(0,7) : "N/A" ;
console.log ("selected page Latitude is " + lati + " & Longitude is " + longi);

var center = new google.maps.LatLng(lati, longi);
var factory = new google.maps.LatLng(lati, longi);

function initialize() {
  var mapOptions = {center: center, zoom: 16, mapTypeId: google.maps.MapTypeId.ROADMAP};
  var map = new google.maps.Map(document.getElementById("map-canvas"),mapOptions);
  // marker options
  var marker = new google.maps.Marker({position: factory, map: map, title: arr[idx].title});
}
google.maps.event.addDomListener(window, 'load', initialize);
}
});
$(document).on("keyup","input[name='q']",function(){
	var searchValue = $(this).val(),
		searchQuery = searchValue.toLowerCase();
	console.log(searchQuery);
	var searchResult = '';
	if(searchQuery == ''){
		$(".search-result").empty();
	}
	else{
		$.each(arr,function(i,item){
			var searchTitle = arr[i].title.toLowerCase(),
				gall = arr[i].galleries,
				thumbImage;
				ratingstars = arr[i].ratingstar,
				kms = arr[i].nearkm;
				
console.log(searchTitle);

function getstars(ratingstars){
				ratingstar = "";
					for (j=0; j < ratingstars; j++) {
						ratingstar += '<img src="master/images/ratingstar.png" alt="" />';
					}
				return ratingstar;
				};

				if (gall.length === 0) {
				thumbImage = "master/images/noimg.png"; }
				else {
				thumbImage = encodeURI(arr[i].galleries[0].img_path);
				}

			if(searchTitle.indexOf(searchQuery) != -1){
				searchResult += '<a href=' + pathname + 'detail.html?pid=' + arr[i].placeid + ' style="text-decoration:none;">\
								<div id="placeblocks">\
									<div style="background-color:rgba(250, 250, 250, 1.0);">\
										<div class="text">\
											<ul>\
											<li style="width:40%;">\
												<img src="' +thumbImage+' " alt="" width="125" height="75" class="img" style="border:2px solid #d1cece;">\
											</li>\
											<li style="width:60%; line-height:18px;">\
												<span style="color:#448802; font-family:Abel, sans-serif; font-size:16px; font-weight:bold;"> "'+arr[i].title +'"</span><br>\
												<span style="color:#222222; font-family:Abel, sans-serif; font-size:14px;"> "'+arr[i].address +'"</span>\
												<div style="color:#000; padding-top:15px;"><ul style="float:left;"><li>'+getstars(ratingstars)+'</li><li>'+kms+'Kms from city</li></ul></div>\
											</li>';
				
				searchResult += '</ul></div></div></div><div class="clear"></div><div class="clear"></div></a>';
			}
		});
		if(searchResult == ''){
			searchResult += '<p style="color:#FFFFFF;margin-left:5px;margin-bottom:30px;">No results found.</p>';
		}
		$(".search-result").empty().append('<h2 style="color:#FFFFFF;margin:10px 5px;">Search results related to the keyword "'+searchValue+'"</h2>'+searchResult);
	}
});
//if (path.includes("detail")) {
document.getElementById("id02").innerHTML = out2;
document.getElementById("id03").innerHTML = maps;
document.getElementById("id04").innerHTML = out3;
//}
//else {
//document.getElementById("id01").innerHTML = out;
//}
}



// $(function(){
// var details = $('#id04 #details').text();	
// console.log(details);
// $(details).each(function(event){
// 	var max_length = 150; 
// 	if($(this).html().length > max_length){
// 			var short_content 	= $(this).html().substr(0,max_length);
// 			var long_content	= $(this).html().substr(max_length);
// 			$(this).html(short_content+
// 						 '<a href="#" class="read_more"><br/>Read More</a>'+
// 						 '<span class="more_text" style="display:none;">'+long_content+'</span>');
//  			$(this).find('a.read_more').click(function(event){ 
// 				event.preventDefault(); 
// 				$(this).hide();
// 				$(this).parents('.item').find('.more_text').show();
// 		 	});
// 		}
// });
// });





</script> 
<script>
//  $( function() {
//    $( "#tabs" ).tabs();
//  } );
</script> 
<script type="text/javascript" >
  $(document).ready(function(){
      $("#mapToggle").click(function(){
          $("#id03").slideToggle("slow");	
  		$(this).find('i').toggleClass('fa fa-chevron-up fa fa-chevron-down')			

      });
  });
</script>


</body>
</html>